{% extends 'base.html' %}

{% block head %}

{% endblock %}

{% block body %}
<!-- Glavni sadržaj stranice -->
<div class="content">
    <!-- Naslov rezultata pretrage -->
    <h1 style="text-align: center; color: #000000; font-size: xx-large;">Rezultati za "{{ search }}"</h1>

    <!-- Tabela za prikaz rezultata -->
    <table>
        <tr>
            <th style="width: 800px;"></th>
        </tr>
        {% if not generated %}
            <!-- Provjera da li su pronađeni rezultati -->
            {% if not isFound or user.definitions|length < 1 %}
                <h3 style="text-align: center; color: white;">Nismo uspjeli pronaći rezultate :(</h4>
                <a class="createbtn" href="/otvaranje" style="border: 1px solid #3b3b3b; margin-left: 810px; border-radius: 0px; font-size: larger;">Izradi novu definiciju!</a>
            {% endif %}

            <!-- Prikaz rezultata pretrage -->
            {% for definition in user.definitions|sort(attribute='date_created', reverse=True) %}
                {% if search.lower() == definition.name.lower() %}
                    <!-- Ako je pronađen točan naziv, preusmjeri na definiciju -->
                    <meta http-equiv="refresh" content="0; /definicija/{{ definition.id }}">
                {% elif (search.lower() in definition.name.lower() or search.lower() in definition.subject.lower()) or (definition.name.lower() in search.lower() or definition.subject.lower() in search.lower()) %}
                    <!-- Ako je pronađena odgovarajuća definicija, prikaži je -->
                    <tr>
                        <div style="position: relative; display: inline-block;">
                            <a href="/definicija/{{ definition.id }}" style="text-decoration: none;">

                                <!-- Slika za svaku definiciju -->
                                <img src="../static/images/note.png" style="width: 315px; height: 40; z-index: 1;  padding-left: 52px; padding-bottom: 52px;">
                                
                                <!-- Prikaz jezika, naziva i datuma kreiranja -->
                                <div style="position: absolute; bottom: 225px; left: 150px; z-index: 2; color: black; font-weight: 700; font-size: larger;">
                                    <font>{{ definition.subject.upper() }}</font>
                                </div>

                                <div style="position: absolute; bottom: 340px; left: 55px; z-index: 2; color: black; font-weight: 800; font-size: 18px; ">
                                    <font>{{ definition.name }}</font>
                                </div>

                                <div style="position: absolute; bottom: 250px; left: 150px; z-index: 2; color: black; font-weight: 700; font-size: larger;">
                                    <font>{{ definition.date_created.date() }}</font>
                                </div>
                            </a>
                        </div>
                    </tr>
                {% endif %}
            {% endfor %}
        {% else %}
            <!-- Prikaz rezultata pretrage -->
            {% for definition in user.definitions|sort(attribute='date_created', reverse=True) %}
                {% if definition.bookmark %}      
                    <!-- Ako je pronađena odgovarajuća definicija, prikaži je -->
                    <tr>
                        <div style="position: relative; display: inline-block;">
                            <a href="/definicija/{{ definition.id }}" style="text-decoration: none;">

                                <!-- Slika za svaku definiciju -->
                                <img src="../static/images/note.png" style="width: 315px; height: 40; z-index: 1;  padding-left: 52px; padding-bottom: 52px;">
                                
                                <!-- Prikaz jezika, naziva i datuma kreiranja -->
                                <div style="position: absolute; bottom: 225px; left: 150px; z-index: 2; color: black; font-weight: 700; font-size: larger;">
                                    <font>{{ definition.subject.upper() }}</font>
                                </div>

                                <div style="position: absolute; bottom: 340px; left: 55px; z-index: 2; color: black; font-weight: 800; font-size: 18px; ">
                                    <font>{{ definition.name }}</font>
                                </div>

                                <div style="position: absolute; bottom: 250px; left: 150px; z-index: 2; color: black; font-weight: 700; font-size: larger;">
                                    <font>{{ definition.date_created.date() }}</font>
                                </div>
                            </a>
                        </div>
                    </tr>
                {% endif %}
            {% endfor %}
        {% endif %}
    </table>
</div>
{% endblock %}
